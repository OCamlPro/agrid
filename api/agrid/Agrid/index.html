<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Agrid (agrid.Agrid)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">agrid</a> &#x00BB; Agrid</nav><header class="odoc-preamble"><h1>Module <code><span>Agrid</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#using-grids">Using grids</a></li><li><a href="#building-grids">Building grids</a></li><li><a href="#iterators">Iterators</a></li></ul></nav><div class="odoc-content"><h2 id="introduction"><a href="#introduction" class="anchor"></a>Introduction</h2><p>Adjustable grids are two dimensional arrays whose width/height can be changed by adding or removing row/column at either end (one at a time).</p><p>Implemented using the <a href="https://github.com/backtracking/flex-array">flex-array library by Jean-Christophe Filliâtre</a>.</p><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>+'a t</span></span><span> = <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Flex_array</span>.t</span> <span class="xref-unresolved">Flex_array</span>.t</span></span></code></div><div class="spec-doc"><p>The type of grids. This is an immutable data structure. Values of type <code>'a t</code> can be compared using structural equality <code>=</code> (provided the elements of type <code>'a</code> can).</p></div></div><h2 id="using-grids"><a href="#using-grids" class="anchor"></a>Using grids</h2><div class="odoc-spec"><div class="spec value anchored" id="val-width"><a href="#val-width" class="anchor"></a><code><span><span class="keyword">val</span> width : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>width g</code> returns the width of <code>g</code>, that is to say its number of columns.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-height"><a href="#val-height" class="anchor"></a><code><span><span class="keyword">val</span> height : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>height g</code> returns the height of <code>g</code>, that is to say its number of rows.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dim"><a href="#val-dim" class="anchor"></a><code><span><span class="keyword">val</span> dim : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int * int</span></code></div><div class="spec-doc"><p><code>dim g</code> returns a pair in which the first element is the width of <code>g</code> and the second one its height.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>x:int <span class="arrow">&#45;&gt;</span></span> <span>y:int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>get g ~x ~y</code> returns the element at width-index <code>~x</code> and height-index <code>~y</code> in grid <code>g</code>. Index start at 0.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_row"><a href="#val-get_row" class="anchor"></a><code><span><span class="keyword">val</span> get_row : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Flex_array</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_row g y</code> returns the row at height-index <code>y</code> in grid <code>g</code>. Index start at 0.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_col"><a href="#val-get_col" class="anchor"></a><code><span><span class="keyword">val</span> get_col : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Flex_array</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_col g x</code> returns the column at width-index <code>x</code> in grid <code>g</code>. Index start at 0.</p></div></div><h2 id="building-grids"><a href="#building-grids" class="anchor"></a>Building grids</h2><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>The empty grid.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_array"><a href="#val-of_array" class="anchor"></a><code><span><span class="keyword">val</span> of_array : <span><span><span><span class="type-var">'a</span> array</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>of_array a</code> returns a grid from the two dimensional array <code>a</code> with the same height, width and order.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_list"><a href="#val-of_list" class="anchor"></a><code><span><span class="keyword">val</span> of_list : <span><span><span><span class="type-var">'a</span> list</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>of_list l</code> returns a grid from the two dimensional list <code>l</code> with the same height, width and order.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>x:int <span class="arrow">&#45;&gt;</span></span> <span>y:int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>set g ~x ~y v</code> returns a new grid where all elements are identical to those of <code>g</code>, except at width-index <code>x</code> and height-index <code>y</code> where the element is <code>v</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cons_row"><a href="#val-cons_row" class="anchor"></a><code><span><span class="keyword">val</span> cons_row : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Flex_array</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>cons_row row grid</code> returns a new grid obtained by appending the row <code>row</code> at the height-axis front of grid <code>g</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-snoc_row"><a href="#val-snoc_row" class="anchor"></a><code><span><span class="keyword">val</span> snoc_row : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Flex_array</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>snow_row grid row</code> returns a new grid obtained by appending the row <code>row</code> at the height-axis end of grid <code>g</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cons_col"><a href="#val-cons_col" class="anchor"></a><code><span><span class="keyword">val</span> cons_col : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Flex_array</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>cons_col col grid</code> returns a new grid obtained by appending the column <code>col</code> at the width-axis front of grid <code>g</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-snoc_col"><a href="#val-snoc_col" class="anchor"></a><code><span><span class="keyword">val</span> snoc_col : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Flex_array</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>snow_col grid col</code> returns a new grid obtained by appending the column <code>col</code> at the width-axis end of grid <code>g</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tail_row"><a href="#val-tail_row" class="anchor"></a><code><span><span class="keyword">val</span> tail_row : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tail_row g</code> returns a new grid obtained by removing the row at the height-axis front of grid <code>g</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-liat_row"><a href="#val-liat_row" class="anchor"></a><code><span><span class="keyword">val</span> liat_row : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>liat_row g</code> returns a new grid obtained by removing the row at the height-axis end of grid <code>g</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tail_col"><a href="#val-tail_col" class="anchor"></a><code><span><span class="keyword">val</span> tail_col : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tail_col g</code> returns a new grid obtained by removing the column at the width-axis front of grid <code>g</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-liat_col"><a href="#val-liat_col" class="anchor"></a><code><span><span class="keyword">val</span> liat_col : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>liat_col g</code> returns a new grid obtained by removing the column at the width-axis end of grid <code>g</code>.</p></div></div><h2 id="iterators"><a href="#iterators" class="anchor"></a>Iterators</h2><div class="odoc-spec"><div class="spec value anchored" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span><span class="keyword">val</span> iter : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>iter f g</code> applies function <code>f</code> in turn to all the elements of <code>g</code>. It goes row by row. It is equivalent to <code>f (get g ~x:0 ~y:0); f (get g ~x:1 ~y:0); ...; f (get g ~x:(w - 1) ~y:0);
    ...; f (get g ~x:0 ~y:(h - 1)); f (get g ~x:1 ~y:(h -1)); ...; f (get g
    ~x:(w - 1) ~y:(h - 1))</code> where <code>w</code> and <code>h</code> are respectively the width and the height of <code>g</code> but runs faster.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iteri"><a href="#val-iteri" class="anchor"></a><code><span><span class="keyword">val</span> iteri : <span><span>(<span>x:int <span class="arrow">&#45;&gt;</span></span> <span>y:int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Same as <a href="#val-iter"><code>iter</code></a>, but the function is applied with the width-index and height-index of the element as first and second argument, and the element itself as third argument.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>map f g</code> returns a grid with the same dimension than <code>g</code> but where each element <code>x</code> has been replaced by the value of <code>f x</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mapi"><a href="#val-mapi" class="anchor"></a><code><span><span class="keyword">val</span> mapi : <span><span>(<span>x:int <span class="arrow">&#45;&gt;</span></span> <span>y:int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-map"><code>map</code></a>, but the function is applied with the width-index and height-index of the element as first and second arguement, and the element itself as third argument.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span><span class="keyword">val</span> fold : <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>fold f acc g</code> computes <code>Flex_array.fold (Flex_array.fold f) acc g</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : 
  <span>?pp_sep_row:<span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?pp_sep_col:<span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>pp ?pp_sep_row ?pp_sep_col pp_v fmt g</code> prints items of grid <code>g</code> using <code>pp_v</code> to print each item, calling <code>pp_sep_row</code> between rows and <code>pp_sep_col</code> between items (i.e. between each column). <code>pp_sep_row</code> defaults to <code>Format</code>.pp_print_cut and <code>pp_print_col</code> defaults to <code>fun fmt () -&gt; Format.fprintf fmt &quot;;&quot;</code>. Does nothing on empty grids.</p></div></div></div></body></html>